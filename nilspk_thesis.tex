\documentclass[UKenglish, a4paper]{ifimaster}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc,url}
\urlstyle{sf}
\usepackage{babel,textcomp,csquotes,ifimasterforside,varioref,graphicx}
\usepackage[backend=biber,style=numeric-comp]{biblatex}
\usepackage{pifont}
\usepackage{booktabs}
\usepackage{verbatim}
\usepackage{listings}

\lstset{%
    captionpos=b,
    tabsize=2,
    breaklines=true
}

\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}
\newcommand{\ampers}{\&}

\title{Implementation and Evaluation of Pub/Sub overlays for P2P Social Networks}
\subtitle{}
\author{Nils Peder Korsveien}

\addbibresource{bibliography.bib}

\begin{document}
\ififorside{}
\frontmatter{}
\maketitle{}

\chapter*{Abstract}
\tableofcontents{}
\listoffigures{}
\listoftables{}
\chapter*{Aknowledgements}
\mainmatter{}

\chapter{Introduction}
\input{chapters/introduction}
    % \section{Motivation}
    % \section{Problem Statement}
    % \section{Thesis Outline}

\chapter{Background}
\label{ch:background}
\input{chapters/background}
    % \section{The Peer-to-Peer Network Architecture}
    % \section{The Publish-Subscribe Communication Paradigm}
    % \section{Online Social Networks}
    % \section{Social Network Analysis}
    % \section{Summary}

\chapter{Protocol Descriptions}
\label{ch:protocol-descriptions}
\section{Scribe}
Structured overlay, Dissemination Trees
\section{PolderCast}
Hybrid overlay, RINGS, CYCLON, VICINITY, Random links (small-world)

\chapter{Design Challenges in Topic-Based Pub/Sub}
\label{ch:desired-system-properties-and-trade-offs}
\input{chapters/existing-approaches}
    % \section{Desired System Properties}
    % \section{Handling Trade-offs}
    % \section{Overlay Construction}
    % \section{Event Dissemination}
    % \section{Summary}

\chapter{Metrics}
\label{ch:metrics}
\input{chapters/metrics}
% FIXME: should probably be a part of the background chapter

\chapter{Implementation}
\label{ch:implementation}
    \section{Implementation Strategy}
        \subsection{Using Test-Driven Development}

        Software Development Methodology is an active area of research
        which is in part driven by the business needs of the private
        sector\cite{janzen2005test}. One popular practice is Test-Driven
        Development (TDD). The promoters of TDD claim it increases
        productivity and reduces the number of bugs and defects in the
        code significantly~\cite{beck2003test}. Research
        efforts performed at IBM~\cite{maximilien2003assessing} seems to
        lend credibility to these claims. However, the use of TDD is not
        prevalent in academia, and in~\cite{janzen2005test} they
        recommend further research into the field in order to better
        determine its effects.

        Using TDD means writing test before writing any code. There are
        different types of test. \emph{Unit Test} targets small,
        independent pieces of code, typically methods within a single
        module or component, while \emph{Integration Tests} aim to test
        code across such modules and components in order to determine
        how well they integrate with each other. In our work, we only
        took advantage of Unit Tests where suitable using the
        JUnit~\cite{junit} and Mockito~\cite{mockito} libraries.
        However, as the system we develop depends on  high number of
        IO-operations through file reads and writes, as well as network
        communication, as suite of integration test could have been
        helpful.

        The TDD approach is best described through the
        Red-Green-Refactor mantra, which is a central part of
        TDD-philosophy:

        \begin{description}
            \item[Red] Write a test that fails.
            \item[Green] Make the test pass.
            \item[Refactor] Refactor the code while making sure the test still passes.
        \end{description}

        In our experience this has been a very helpful routine to follow
        in our implementation work, as it enables us as developer to
        refactor with confidence achieving more maintainable code and a
        more thoughtful software design. Using TDD forced us to think
        more deeply about what functionality to implement and how to
        structure and split the problem domain into smaller function
        points. We believe that in the end, following TDD where its
        suitable is beneficial to both programmer productivity and
        happiness. Also, we are confident that it decreased the level of
        technical debt in our implementation, a problem we find to be
        commonplace in academia. As we plan to host our implementation
        code in a public repository, sharing it with the research
        community, any tool or method that helps us improve the design
        and maintainability of our implementation is of great value to
        us.

        \subsection{Extending PeerNet for Gephi}
        \subsection{Aggregating data}
            Using the coordinator as a data aggregate. Aggregated data
            stored in gexf format.
    \section{Implementing Protocols in PeerNet}
        \subsection{Updating Existing Protocols}
        \subsection{Protocols}
        \subsection{Observers}
    \section{Extending PeerNet}
    \section{Implementation Challenges}
    \subsection{Implementing a workaround for memory leaks in the Gephi Toolkit}
    CollectorWorker -> GSON -> New JVM
    \subsection{Handling protocols with inconsistent views}
    Protocols remove some edges between nextCycle () and processEvent ()
    \subsection{Issues with dynamic graphs in Gephi}
        Problems handling dynamic attributes, playback issues caused by
        rounding errors as gephi uses double to define intervals.
    \subsection{GEXF file sizes}
        The GEXF format may not be scalable. However, gephi accepts
        archive files. Zipping gexf files reduced file sizes up to 93%.
    \subsection{Messages too large in PolderCast}
        It is often the case that taking something that works well
        locally and transparently distributing it leads to difficulties.

\chapter{Evaluation}
\label{ch:evaluation}
    \section{Experimental Setup}
    \section{Evaluation Workloads}
    \section{Experiments}
    \section{Evaluation Summary}

\chapter{Conclusion and Future Work}
\label{ch:conclusion-and-future-work}
    \section{Conclusion}
    \section{Future Work}

% End of part IV

\backmatter{}
\printbibliography{}
\end{document}
